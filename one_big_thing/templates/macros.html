{% macro input(name, label, data={}, errors={}, type="text") -%}
  {% if errors.get(name) %}
    <p id="question-{{name}}-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">Error:</span> {{errors.get(name)}}
    </p>
  {% endif %}
  <div class="govuk-form-group {{errors.get(name) and 'govuk-form-group--error' or ''}}">
    <label class="govuk-label" for="question-{{name}}">
      {{label}}
    </label>
    {% if errors.get(name) %}
      <input class="govuk-input govuk-input--error" id="question-{{name}}" name="{{name}}" type="{{type}}" {% if errors.get(name) %} aria-describedby="question-{{name}}-error" {% endif %} autocomplete="off" value="{{data.get(name, '')}}">
    {% else %}
      <input class="govuk-input" id="question-{{name}}" name="{{name}}" type="{{type}}" {% if errors.get(name) %} aria-describedby="question-{{name}}-error" {% endif %} autocomplete="off" value="{{data.get(name, '')}}">
    {% endif %}
    </div>
{%- endmacro%}


{% macro textarea(name, label, hint="", data={}, errors={}, type="text") -%}
  {% if errors.get(name) %}
    <p id="question-{{name}}-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">Error:</span> {{errors.get(name)}}
    </p>
  {% endif %}
  <div class="govuk-form-group {{errors.get(name) and 'govuk-form-group--error' or ''}}">
    <label class="govuk-label" for="question-{{name}}">
      {{label}}
    </label>
    <div id="{{name}}-hint" class="govuk-hint">
      {{hint}}
    </div>
    {% if errors.get(name) %}
      <textarea class="govuk-textarea govuk-input--error" id="question-{{name}}" name="{{name}}" type="{{type}}" {% if errors.get(name) %} aria-describedby="question-{{name}}-error" {% endif %} autocomplete="off">{{data.get(name, '')}}</textarea>
    {% else %}
      <textarea class="govuk-textarea" id="question-{{name}}" name="{{name}}" type="{{type}}" {% if errors.get(name) %} aria-describedby="question-{{name}}-error" {% endif %} autocomplete="off">{{data.get(name, '')}}</textarea>
    {% endif %}
  </div>
{%- endmacro%}


{% macro warning(msg) %}
  <div class="govuk-warning-text">
    <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
    <strong class="govuk-warning-text__text">
      <span class="govuk-warning-text__assistive">Warning</span>
      {{msg}}
    </strong>
  </div>
{%- endmacro%}


{% macro radios(name, options, data, errors) -%}
  {% if errors.get(name) %}
    <p id="question-{{name}}-error" class="govuk-error-message">
      <span class="govuk-visually-hidden">Error:</span> {{errors.get(name)}}
    </p>
  {% endif %}
  <div id="question-{{name}}" class="govuk-radios" data-module="govuk-radios">
    {% for option in options %}
      {% if option is string %}
        {% set value, label = option, option %}
      {% elif option is mapping %}
        {% set value, label = option.value, option.label %}
      {% else %}
        {% set value, label = option %}
      {% endif %}
      <div class="govuk-radios__item">
        <input class="govuk-radios__input" id="{{name}}-option-{{slugify(value)}}" name="{{name}}" type="radio" value="{{value}}" {{is_checked(data, name)}} aria-describedby="{{name}}-option-{{slugify(value)}}-hint">
        <label class="govuk-label govuk-radios__label" for="{{name}}-option-{{slugify(value)}}">
          {{label}}
        </label>
        {% if option is mapping %}
          {% if option.hint %}
            <div id="{{name}}-option-{{slugify(value)}}-hint" class="govuk-hint govuk-radios__hint">
              {{option.hint}}
            </div>
          {% endif %}
        {% endif %}
      </div>
    {% endfor %}
  </div>
{%- endmacro%}


{% macro checkboxes(name, label, options, data, errors) -%}
  <div class="govuk-checkboxes" data-module="govuk-checkboxes">
    {% for option in options %}
      {% if errors.get(option[0]) %}
        <p id="question-{{option[0]}}-error" class="govuk-error-message">
          <span class="govuk-visually-hidden">Error:</span> {{errors.get(option[0])}}
        </p>
      {% endif %}
      <div class="govuk-checkboxes__item">
        <input class="govuk-checkboxes__input" id="{{option[0]}}" name="{{name}}" type="checkbox"  value=True {{is_checked(data, name, option[0])}} aria-describedby="{{option[0]}}-hint">
        <label class="govuk-label govuk-checkboxes__label" for="{{option[0]}}-option-{{slugify(value)}}">
          {{option[1]}}
        </label>
      </div>
    {% endfor %}
  </div>
{%- endmacro%}


{% macro start_new_chat() -%}
  <a href={{url("declaration")}} role="button" draggable="false" class="govuk-button govuk-button--start" data-module="govuk-button">
    Start a new chat
    <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
      <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
    </svg>
  </a>
{%- endmacro%}